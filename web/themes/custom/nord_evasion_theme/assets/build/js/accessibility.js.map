{"version":3,"file":"accessibility.js","sources":["../../src/javascript/src/accessibility/src/Accessibility.js","../../src/javascript/src/accessibility/accessibility.js"],"sourcesContent":["class Accessibility {\n    constructor(context, settings) {\n        this.context = context;\n        this.$buttons = this.context.querySelectorAll(\"button\");\n        //ARIA PRESSED HANDLER ON BUTTON\n        Array.from(this.$buttons).map($button => {\n            $button.removeEventListener(\"click\", this.ariaPressedHandler);\n            $button.addEventListener(\"click\", this.ariaPressedHandler);\n        });\n\n        //ACCESSIBILITY FONT SIZES\n        this.currentFontSize = sessionStorage.getItem(\"fontSize\");\n        if (this.currentFontSize && this.currentFontSize <= 5 && this.currentFontSize >= 1) {\n            this.context.children[0].classList.add(`font-size-${this.currentFontSize}`);\n        } else {\n            sessionStorage.setItem(\"fontSize\", 3);\n            this.currentFontSize = 3;\n            this.context.children[0].classList.add(`font-size-3`);\n        }\n        this.$buttonIncreaseFontSize = document.querySelectorAll(\"button[data-font-size='increase']\")[0];\n        this.handleClickIncreaseFontSize = this.handleClickIncreaseFontSize.bind(this);\n        this.$buttonIncreaseFontSize?.addEventListener(\"click\", this.handleClickIncreaseFontSize);\n        if (this.currentFontSize > 3) {\n            this.$buttonIncreaseFontSize.classList.add(\"is-active\");\n        }\n\n        this.$buttonDecreaseFontSize = document.querySelectorAll(\"button[data-font-size='decrease']\")[0];\n        this.handleClickDecreaseFontSize = this.handleClickDecreaseFontSize.bind(this);\n        this.$buttonDecreaseFontSize?.addEventListener(\"click\", this.handleClickDecreaseFontSize);\n        if (this.currentFontSize < 3) {\n            this.$buttonDecreaseFontSize.classList.add(\"is-active\");\n        }\n\n\n        //ACCESSIBILITY DYSLEXIA\n        this.currentFont = sessionStorage.getItem(\"fontFamily\");\n        if (this.currentFont === 'dyslexia') {\n            this.context.children[0].classList.add(`dyslexia`);\n        } else {\n            sessionStorage.setItem(\"fontFamily\", \"classic\");\n        }\n        this.$buttonsToggleDylsexiaFont = document.querySelectorAll(\"button[data-font-toggle='dyslexia']\");\n        this.handleClickDyslexia = this.handleClickDyslexia.bind(this);\n        this.$buttonsToggleDylsexiaFont?.forEach(($buttonsToggleDylsexiaFont) => {\n            $buttonsToggleDylsexiaFont.addEventListener(\"click\", this.handleClickDyslexia);\n            if (this.currentFont === \"dyslexia\") {\n                $buttonsToggleDylsexiaFont.classList.add(\"is-active\");\n            }\n        });\n\n        //ACCESSIBILITY FAST LINKS\n        this.$fastLinkToMenu = document.querySelectorAll(\"a[href='#menu']\")[0];\n        this.$fastLinkToMenu.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            document.querySelector(\".Menu-main ul>li:first-of-type a\").focus();\n        });\n\n        this.$fastLinkToSearch = document.querySelectorAll(\"a[href='#search']\")[0];\n        this.$fastLinkToSearch.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            let $buttonTriggerSearch = document.querySelectorAll(\"button.Menu-search\")[0];\n            $buttonTriggerSearch.click();\n        });\n        this.$fastLinkToContent = document.querySelectorAll(\"a[href='#content'\")[0];\n        this.$fastLinkToContent.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            let toolbarHeight = settings?.toolbar ? 90 : 0;\n            let content = document.getElementById(\"content\");\n            window.scrollTo({ top: content.offsetTop - toolbarHeight, behavior: 'smooth' });\n            content.focus();\n        })\n    }\n\n    ariaPressedHandler(ev) {\n        let ariaPressedValue = ev.currentTarget.getAttribute(\"aria-pressed\");\n        if (!ariaPressedValue || ariaPressedValue === 'false') {\n            ev.currentTarget.setAttribute(\"aria-pressed\", true);\n        } else {\n            ev.currentTarget.setAttribute(\"aria-pressed\", !ariaPressedValue);\n        }\n    }\n\n    handleClickIncreaseFontSize(ev) {\n        ev.currentTarget.classList.add(\"is-active\");\n        ev.currentTarget.setAttribute(\"aria-pressed\", true);\n        this.$buttonDecreaseFontSize.classList.remove(\"is-active\");\n        this.$buttonDecreaseFontSize.removeAttribute(\"aria-pressed\", false);\n        if (this.currentFontSize < 5) {\n            this.currentFontSize++;\n            sessionStorage.setItem(\"fontSize\", this.currentFontSize);\n            this.context.children[0].classList.replace(`font-size-${this.currentFontSize - 1}`, `font-size-${this.currentFontSize}`);\n        }\n    }\n\n    handleClickDecreaseFontSize(ev) {\n        ev.currentTarget.classList.add(\"is-active\");\n        ev.currentTarget.setAttribute(\"aria-pressed\", true);\n        this.$buttonIncreaseFontSize.classList.remove(\"is-active\");\n        this.$buttonIncreaseFontSize.removeAttribute(\"aria-pressed\", false);\n        if (this.currentFontSize > 1) {\n            this.currentFontSize--;\n            sessionStorage.setItem(\"fontSize\", this.currentFontSize);\n            this.context.children[0].classList.replace(`font-size-${this.currentFontSize + 1}`, `font-size-${this.currentFontSize}`);\n        }\n    }\n\n    handleClickDyslexia(ev) {\n        console.log(this.currentFont);\n        if (this.currentFont === \"classic\") {\n            ev.currentTarget.classList.add(\"is-active\");\n            ev.currentTarget.setAttribute(\"aria-pressed\", true);\n            sessionStorage.setItem(\"fontFamily\", \"dyslexia\");\n            this.context.children[0].classList.add(\"dyslexia\");\n            this.currentFont = \"dyslexia\";\n        } else {\n            ev.currentTarget.classList.remove(\"is-active\");\n            ev.currentTarget.removeAttribute(\"aria-pressed\", true);\n            sessionStorage.setItem(\"fontFamily\", \"classic\");\n            this.context.children[0].classList.remove(\"dyslexia\");\n            this.currentFont = \"classic\";\n        }\n    }\n\n    searchButtonHandler(target) {\n        target.addEventListener(\"click\", (ev) => {\n            ev.currentTarget.setAttribute(\"aria-expanded\", true);\n        });\n    }\n\n}\n\nexport default Accessibility;\n\nHTMLButtonElement.prototype.applyAccessibilityAriaPressed = function () {\n    this.addEventListener(\"click\", (ev) => {\n        let ariaPressedValue = ev.currentTarget.getAttribute(\"aria-pressed\");\n        if (!ariaPressedValue || ariaPressedValue === 'false') {\n            ev.currentTarget.setAttribute(\"aria-pressed\", true);\n        } else {\n            ev.currentTarget.setAttribute(\"aria-pressed\", !ariaPressedValue);\n        }\n    });\n}","import Accessibility from \"./src/Accessibility\";\n\n(function (Drupal) { // closure\n    'use strict';\n    Drupal.behaviors.accessibility = {\n        attach: (context, settings) => {\n            const accessiblity = new Accessibility(context, settings);\n            let menuSearch = context.querySelectorAll(\".Menu-search\");\n            if(menuSearch.length > 0) {\n                accessiblity.searchButtonHandler(menuSearch[0]);\n            }\n        }\n    };\n}(Drupal));\n"],"names":["Accessibility","context","settings","$buttons","querySelectorAll","Array","from","map","$button","removeEventListener","ariaPressedHandler","addEventListener","currentFontSize","sessionStorage","getItem","children","classList","add","setItem","$buttonIncreaseFontSize","document","handleClickIncreaseFontSize","bind","$buttonDecreaseFontSize","handleClickDecreaseFontSize","currentFont","$buttonsToggleDylsexiaFont","handleClickDyslexia","forEach","$fastLinkToMenu","e","preventDefault","querySelector","focus","$fastLinkToSearch","$buttonTriggerSearch","click","$fastLinkToContent","toolbarHeight","toolbar","content","getElementById","window","scrollTo","top","offsetTop","behavior","ev","ariaPressedValue","currentTarget","getAttribute","setAttribute","remove","removeAttribute","replace","console","log","target","HTMLButtonElement","prototype","applyAccessibilityAriaPressed","Drupal","attach","accessiblity"],"mappings":"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"}