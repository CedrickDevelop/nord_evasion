{"version":3,"file":"backButton.js","sources":["../../src/javascript/src/common/drupal/drupal.js","../../src/javascript/src/backButton/src/BackButton.js","../../src/javascript/src/backButton/backButton.js"],"sourcesContent":["export let T = {\n    /**\n     * Renvoie vrai si le context est root (document)\n     * @param context\n     */\n    contextIsRoot: function( context){\n        return 'HTML' === context.children[0].tagName;\n    },\n    /**\n     * Retourne vrai si la variable est définie.\n     * @param variable\n     * @returns {boolean}\n     */\n    isDefined: function (variable) {\n        return 'undefined' !== typeof variable;\n    },\n    /**\n     * Retourne la taille de la fenêtre dans un objet avec .width et .height\n     * @returns object\n     */\n    viewport: function () {\n        var e = window, a = 'inner';\n        if (!('innerWidth' in window )) {\n            a = 'client';\n            e = document.documentElement || document.body;\n        }\n        return { width : e[ a+'Width' ] , height : e[ a+'Height' ]};\n    }\n};\nexport let DrupalHelpers = {\n    getBasePath() {\n        return drupalSettings.path.baseUrl + drupalSettings.path.pathPrefix;\n    }\n};","import { T } from \"../../common/drupal/drupal\";\n\nclass BackButton {\n\n    constructor() {\n        this.handleBackButton = this.handleBackButton.bind(this);\n        this.refferer;\n    }\n\n    init(context) {\n        const $backButton = context.getElementById(\"back\");\n        if(document.referrer.split('/')[2] !== location.hostname) {\n            $backButton.classList.add('visually-hidden');\n            $backButton.removeEventListener(\"click\", this.handleBackButton);\n        } else {\n            this.referrer = document.referrer;\n            $backButton.addEventListener(\"click\", this.handleBackButton);\n        }\n    }\n\n    handleBackButton(ev) {\n        window.location.href = this.referrer;\n    }\n\n    attach(context, settings) {\n        if (T.contextIsRoot(context)) {\n            this.init(context);\n        }\n    }\n}\n\nexport let backButton = new BackButton();","import {backButton} from \"./src/BackButton\";\n\n(function (Drupal) { // closure\n    'use strict';\n    Drupal.behaviors.backButton = backButton;\n}(Drupal));"],"names":["T","contextIsRoot","context","children","tagName","isDefined","variable","viewport","e","window","a","document","documentElement","body","width","height","BackButton","handleBackButton","bind","refferer","$backButton","getElementById","referrer","split","location","hostname","classList","add","removeEventListener","addEventListener","ev","href","settings","init","backButton","Drupal"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,IAAIA,CAAC,GAAG;EACX;EACJ;EACA;EACA;EACIC,EAAAA,aAAa,EAAE,uBAAUC,OAAV,EAAkB;EAC7B,WAAO,WAAWA,OAAO,CAACC,QAAR,CAAiB,CAAjB,EAAoBC,OAAtC;EACH,GAPU;;EAQX;EACJ;EACA;EACA;EACA;EACIC,EAAAA,SAAS,EAAE,mBAAUC,QAAV,EAAoB;EAC3B,WAAO,gBAAgB,OAAOA,QAA9B;EACH,GAfU;;EAgBX;EACJ;EACA;EACA;EACIC,EAAAA,QAAQ,EAAE,oBAAY;EAClB,QAAIC,CAAC,GAAGC,MAAR;EAAA,QAAgBC,CAAC,GAAG,OAApB;;EACA,QAAI,EAAE,gBAAgBD,MAAlB,CAAJ,EAAgC;EAC5BC,MAAAA,CAAC,GAAG,QAAJ;EACAF,MAAAA,CAAC,GAAGG,QAAQ,CAACC,eAAT,IAA4BD,QAAQ,CAACE,IAAzC;EACH;;EACD,WAAO;EAAEC,MAAAA,KAAK,EAAGN,CAAC,CAAEE,CAAC,GAAC,OAAJ,CAAX;EAA2BK,MAAAA,MAAM,EAAGP,CAAC,CAAEE,CAAC,GAAC,QAAJ;EAArC,KAAP;EACH;EA3BU,CAAR;;MCEDM;EAEF,wBAAc;EAAA;;EACV,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAxB;EACA,SAAKC,QAAL;EACH;;;;aAED,cAAKjB,OAAL,EAAc;EACV,UAAMkB,WAAW,GAAGlB,OAAO,CAACmB,cAAR,CAAuB,MAAvB,CAApB;;EACA,UAAGV,QAAQ,CAACW,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,MAAoCC,QAAQ,CAACC,QAAhD,EAA0D;EACtDL,QAAAA,WAAW,CAACM,SAAZ,CAAsBC,GAAtB,CAA0B,iBAA1B;EACAP,QAAAA,WAAW,CAACQ,mBAAZ,CAAgC,OAAhC,EAAyC,KAAKX,gBAA9C;EACH,OAHD,MAGO;EACH,aAAKK,QAAL,GAAgBX,QAAQ,CAACW,QAAzB;EACAF,QAAAA,WAAW,CAACS,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKZ,gBAA3C;EACH;EACJ;;;aAED,0BAAiBa,EAAjB,EAAqB;EACjBrB,MAAAA,MAAM,CAACe,QAAP,CAAgBO,IAAhB,GAAuB,KAAKT,QAA5B;EACH;;;aAED,gBAAOpB,OAAP,EAAgB8B,QAAhB,EAA0B;EACtB,UAAIhC,CAAC,CAACC,aAAF,CAAgBC,OAAhB,CAAJ,EAA8B;EAC1B,aAAK+B,IAAL,CAAU/B,OAAV;EACH;EACJ;;;;;;EAGE,IAAIgC,UAAU,GAAG,IAAIlB,UAAJ,EAAjB;;EC7BN;;EAEGmB;EACH;;;;;;"}