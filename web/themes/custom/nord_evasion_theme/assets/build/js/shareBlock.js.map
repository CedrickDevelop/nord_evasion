{"version":3,"file":"shareBlock.js","sources":["../../src/javascript/src/shareBlock/src/ShareBlock.js","../../src/javascript/src/common/drupal/drupal.js","../../src/javascript/src/shareBlock/shareBlock.js"],"sourcesContent":["class ShareBlock {\n\n    constructor(context) {\n        this.$shareButton = context.getElementById(\"share\");\n        this.$shareLinks = this.$shareButton?.nextElementSibling;\n\n        this.handleShareButtonEvent = this.handleShareButtonEvent.bind(this);\n        this.handleBlurShareButtonEvent = this.handleBlurShareButtonEvent.bind(this);\n    }\n\n    init() {\n        this.$shareButton?.addEventListener(\"click\", this.handleShareButtonEvent);\n        this.$shareButton?.addEventListener(\"blur\", this.handleBlurShareButtonEvent);\n    }\n\n    handleShareButtonEvent(e) {\n        if (!this.$shareLinks?.classList.contains(\"active\")) {\n            this.$shareLinks?.classList.add(\"active\");\n        }\n        else {\n            this.$shareLinks?.classList.remove(\"active\");\n        }\n    }\n\n    handleBlurShareButtonEvent(e) {\n        this.$shareLinks?.classList.remove(\"active\");\n    }\n}\n\nexport default ShareBlock;","export let T = {\n    /**\n     * Renvoie vrai si le context est root (document)\n     * @param context\n     */\n    contextIsRoot: function( context){\n        return 'HTML' === context.children[0].tagName;\n    },\n    /**\n     * Retourne vrai si la variable est définie.\n     * @param variable\n     * @returns {boolean}\n     */\n    isDefined: function (variable) {\n        return 'undefined' !== typeof variable;\n    },\n    /**\n     * Retourne la taille de la fenêtre dans un objet avec .width et .height\n     * @returns object\n     */\n    viewport: function () {\n        var e = window, a = 'inner';\n        if (!('innerWidth' in window )) {\n            a = 'client';\n            e = document.documentElement || document.body;\n        }\n        return { width : e[ a+'Width' ] , height : e[ a+'Height' ]};\n    }\n};\nexport let DrupalHelpers = {\n    getBasePath() {\n        return drupalSettings.path.baseUrl + drupalSettings.path.pathPrefix;\n    }\n};","import ShareBlock from \"./src/ShareBlock\";\nimport { T } from \"../common/drupal/drupal\";\n\n(function (Drupal) { // closure\n    'use strict';\n\n    // Popin\n    Drupal.behaviors.shareBlock = {\n        attach: (context, settings) => {\n            if(T.contextIsRoot(context)) {\n                const shareBlock = new ShareBlock(context);\n                shareBlock.init();\n            }\n        }\n    };\n}(Drupal));"],"names":["ShareBlock","context","$shareButton","getElementById","$shareLinks","nextElementSibling","handleShareButtonEvent","bind","handleBlurShareButtonEvent","addEventListener","e","classList","contains","add","remove","T","contextIsRoot","children","tagName","isDefined","variable","viewport","window","a","document","documentElement","body","width","height","Drupal","attach","shareBlock"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;EAEF,sBAAYC,OAAZ,EAAqB;EAAA;;EAAA;;EACjB,SAAKC,YAAL,GAAoBD,OAAO,CAACE,cAAR,CAAuB,OAAvB,CAApB;EACA,SAAKC,WAAL,yBAAmB,KAAKF,YAAxB,uDAAmB,mBAAmBG,kBAAtC;EAEA,SAAKC,sBAAL,GAA8B,KAAKA,sBAAL,CAA4BC,IAA5B,CAAiC,IAAjC,CAA9B;EACA,SAAKC,0BAAL,GAAkC,KAAKA,0BAAL,CAAgCD,IAAhC,CAAqC,IAArC,CAAlC;EACH;;;;aAED,gBAAO;EAAA;;EACH,kCAAKL,YAAL,4EAAmBO,gBAAnB,CAAoC,OAApC,EAA6C,KAAKH,sBAAlD;EACA,kCAAKJ,YAAL,4EAAmBO,gBAAnB,CAAoC,MAApC,EAA4C,KAAKD,0BAAjD;EACH;;;aAED,gCAAuBE,CAAvB,EAA0B;EAAA;;EACtB,UAAI,uBAAC,KAAKN,WAAN,8CAAC,kBAAkBO,SAAlB,CAA4BC,QAA5B,CAAqC,QAArC,CAAD,CAAJ,EAAqD;EAAA;;EACjD,mCAAKR,WAAL,0EAAkBO,SAAlB,CAA4BE,GAA5B,CAAgC,QAAhC;EACH,OAFD,MAGK;EAAA;;EACD,mCAAKT,WAAL,0EAAkBO,SAAlB,CAA4BG,MAA5B,CAAmC,QAAnC;EACH;EACJ;;;aAED,oCAA2BJ,CAA3B,EAA8B;EAAA;;EAC1B,iCAAKN,WAAL,0EAAkBO,SAAlB,CAA4BG,MAA5B,CAAmC,QAAnC;EACH;;;;;;EC1BE,IAAIC,CAAC,GAAG;EACX;EACJ;EACA;EACA;EACIC,EAAAA,aAAa,EAAE,uBAAUf,OAAV,EAAkB;EAC7B,WAAO,WAAWA,OAAO,CAACgB,QAAR,CAAiB,CAAjB,EAAoBC,OAAtC;EACH,GAPU;;EAQX;EACJ;EACA;EACA;EACA;EACIC,EAAAA,SAAS,EAAE,mBAAUC,QAAV,EAAoB;EAC3B,WAAO,gBAAgB,OAAOA,QAA9B;EACH,GAfU;;EAgBX;EACJ;EACA;EACA;EACIC,EAAAA,QAAQ,EAAE,oBAAY;EAClB,QAAIX,CAAC,GAAGY,MAAR;EAAA,QAAgBC,CAAC,GAAG,OAApB;;EACA,QAAI,EAAE,gBAAgBD,MAAlB,CAAJ,EAAgC;EAC5BC,MAAAA,CAAC,GAAG,QAAJ;EACAb,MAAAA,CAAC,GAAGc,QAAQ,CAACC,eAAT,IAA4BD,QAAQ,CAACE,IAAzC;EACH;;EACD,WAAO;EAAEC,MAAAA,KAAK,EAAGjB,CAAC,CAAEa,CAAC,GAAC,OAAJ,CAAX;EAA2BK,MAAAA,MAAM,EAAGlB,CAAC,CAAEa,CAAC,GAAC,QAAJ;EAArC,KAAP;EACH;EA3BU,CAAR;;ECGN;;EAIGM;EACIC;EACI;EACI;EACAC;EACH;EACJ;EANyB;EAQjC;;;;;;"}